<!DOCTYPE html>
<html lang="en">

<head>
    <title>COLOR GENERATOR</title>
    <link rel="stylesheet" href="styles.css" />
</head>

<body>
    <div class="container">
        <div class="top-container">
            <h1>Hexadecimal Color Generator</h1>
            <div class="div-ui">
                <input class="input" placeholder="Enter a number greater than 5 ..."/>
                <button class="button-generate">Generate</button>
                <button class="button-stop">Stop</button>
            </div>
            <p>Colors change people's <i>emotions</i>, so use meaningful colors on your site.</p>
        </div>
        
        <div class="bottom-container"></div>
    </div>


    <script>
        const bottomContainer = document.querySelector('.bottom-container')
        const generateButton = document.querySelector('.button-generate')
        const stopButton = document.querySelector('.button-stop')
        //const copyButton = document.querySelector('button-copy')
        const input = document.querySelector('.input')

        
        
        const generateHexaColor = () => {
            let string = '0123456789abcdef'
            let hexaColor = '#'
            for (let i = 0; i < 6; i++) {
                let index = Math.floor(Math.random() * string.length)
                hexaColor += string[index]
            }
            return hexaColor
        }

        const generate = (j=5) => {
            for (let i = 0; i < j; i++) {
                const title = document.createElement('h2')
                const div = document.createElement('div')
                const copyButton = document.createElement('button')

                title.style.margin = '10rem'
                copyButton.textContent = 'Copy'
                copyButton.style.backgroundColor = "lightgrey"
                copyButton.style.margin = '10rem'
                    
                div.appendChild(title)
                div.appendChild(copyButton)
                bottomContainer.append(div)

                const interval = setInterval(() => {
                    let generatedColor = generateHexaColor();
                    title.textContent = generatedColor;
                    div.style.background = generatedColor;        
                }, 2000)

                stopButton.addEventListener('click', () => {
                    console.log("testing stop")
                    clearInterval(interval);
                })  

                copyButton.addEventListener('click', () => {
                    title.textContent = document.execCommand('copy');
                })
                
                bottomContainer.addEventListener('mouseover', () => {
                    clearInterval(interval);
                })
                
                bottomContainer.addEventListener('mouseout', () => {
                    bottomContainer.textContent = '';
                    generate()
                })
            }
        }
        
        generateButton.addEventListener('click', () => {
            bottomContainer.textContent = '';
            if (input.value > 5) {
                generate(input.value)
            } else if (input.value == null) {
                generate(5)
            } else {
                alert("The number must be greater than 5");
                generate(5);
            }
            input.value = null;
        })
        
        
        generate();
        

    </script>
</body>

</html>